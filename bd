-- Script para crear base de datos completa con datos de prueba
-- Ejecutar línea por línea o por secciones

-- Crear la base de datos
DROP DATABASE IF EXISTS servicios_db;
CREATE DATABASE servicios_db;
USE servicios_db;

-- Crear las tablas
CREATE TABLE tipo_servicio (
    id INT AUTO_INCREMENT PRIMARY KEY,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    nombre_tipo VARCHAR(255) NOT NULL UNIQUE,
    descripcion_tipo TEXT NOT NULL
);

CREATE TABLE zona (
    id INT AUTO_INCREMENT PRIMARY KEY,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    descripcion_zona TEXT NOT NULL
);

CREATE TABLE usuario (
    id INT AUTO_INCREMENT PRIMARY KEY,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    mail VARCHAR(255) NOT NULL UNIQUE,
    contrasena VARCHAR(255) NOT NULL,
    tipo_doc VARCHAR(50) NOT NULL,
    numero_doc VARCHAR(50) NOT NULL UNIQUE,
    telefono VARCHAR(20) UNIQUE,
    nombre VARCHAR(255),
    apellido VARCHAR(255),
    direccion TEXT,
    nombre_fantasia VARCHAR(255),
    descripcion TEXT,
    foto VARCHAR(500)
);

CREATE TABLE tarea (
    id INT AUTO_INCREMENT PRIMARY KEY,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    nombre_tarea VARCHAR(255) NOT NULL UNIQUE,
    descripcion_tarea TEXT NOT NULL,
    duracion_tarea INT NOT NULL,
    tipo_servicio_id INT NOT NULL,
    FOREIGN KEY (tipo_servicio_id) REFERENCES tipo_servicio(id)
);

CREATE TABLE servicio (
    id INT AUTO_INCREMENT PRIMARY KEY,
    precio DECIMAL(10,2) NOT NULL,
    tarea_id INT NOT NULL,
    FOREIGN KEY (tarea_id) REFERENCES tarea(id)
);

CREATE TABLE turno (
    id INT AUTO_INCREMENT PRIMARY KEY,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    fecha_turno DATE NOT NULL,
    hora_turno TIME NOT NULL,
    estado_turno VARCHAR(50) DEFAULT 'pendiente',
    usuario_id INT NOT NULL,
    servicio_id INT NOT NULL,
    FOREIGN KEY (usuario_id) REFERENCES usuario(id),
    FOREIGN KEY (servicio_id) REFERENCES servicio(id)
);

CREATE TABLE horario (
    id INT AUTO_INCREMENT PRIMARY KEY,
    dia_semana INT NOT NULL CHECK (dia_semana >= 0 AND dia_semana <= 6),
    hora_desde TIME NOT NULL,
    hora_hasta TIME NOT NULL,
    usuario_id INT NOT NULL,
    FOREIGN KEY (usuario_id) REFERENCES usuario(id)
);

-- Tablas de relación many-to-many
CREATE TABLE usuario_servicio (
    usuario_id INT NOT NULL,
    servicio_id INT NOT NULL,
    PRIMARY KEY (usuario_id, servicio_id),
    FOREIGN KEY (usuario_id) REFERENCES usuario(id),
    FOREIGN KEY (servicio_id) REFERENCES servicio(id)
);

CREATE TABLE usuario_tipo_servicio (
    usuario_id INT NOT NULL,
    tipo_servicio_id INT NOT NULL,
    PRIMARY KEY (usuario_id, tipo_servicio_id),
    FOREIGN KEY (usuario_id) REFERENCES usuario(id),
    FOREIGN KEY (tipo_servicio_id) REFERENCES tipo_servicio(id)
);

CREATE TABLE usuario_zona (
    usuario_id INT NOT NULL,
    zona_id INT NOT NULL,
    PRIMARY KEY (usuario_id, zona_id),
    FOREIGN KEY (usuario_id) REFERENCES usuario(id),
    FOREIGN KEY (zona_id) REFERENCES zona(id)
);

-- Insertar datos de prueba

-- 1. Tipos de servicio

INSERT INTO tipo_servicio (nombre_tipo, descripcion_tipo) VALUES
('Limpieza', 'Servicios de limpieza doméstica y comercial'),
('Plomería', 'Servicios de instalación y reparación de sistemas de agua'),
('Electricidad', 'Servicios eléctricos domésticos y comerciales'),
('Jardinería', 'Mantenimiento de jardines y espacios verdes'),
('Carpintería', 'Trabajos en madera y muebles'),
('Pintura', 'Servicios de pintura interior y exterior'),
('Mecánica', 'Reparación y mantenimiento de vehículos'),
('Informática', 'Servicios técnicos de computación'),
('Belleza', 'Servicios de estética y belleza'),
('Educación', 'Clases particulares y tutorías'),
('Mascotas', 'Cuidado y servicios para mascotas'),
('Cocina', 'Servicios gastronómicos y catering'),
('Transporte', 'Servicios de mudanza y transporte'),
('Salud', 'Servicios de salud y bienestar'),
('Eventos', 'Organización de eventos y celebraciones');

-- 2. Zonas
INSERT INTO zona (descripcion_zona) VALUES
('Centro - Microcentro y área comercial principal'),
('Zona Norte - Barrios residenciales del norte'),
('Zona Sur - Barrios del sur de la ciudad'),
('Zona Oeste - Barrios occidentales'),
('Zona Este - Barrios orientales'),
('Barrio Pichincha - Zona tradicional'),
('Barrio Fisherton - Zona residencial'),
('Barrio Echesortu - Área comercial'),
('Barrio Belgrano - Zona céntrica'),
('Barrio Lisandro de la Torre - Zona oeste'),
('Barrio Parque Casas - Zona norte'),
('Barrio Refinería - Zona sur'),
('Barrio Ludueña - Zona noroeste'),
('Barrio Rucci - Zona suroeste'),
('Barrio Empalme Graneros - Zona oeste');

-- 3. Usuarios Clientes (solo tienen turnos)
INSERT INTO usuario (mail, contrasena, tipo_doc, numero_doc, telefono, nombre, apellido, direccion) VALUES
('maria.garcia@email.com', 'hash123', 'DNI', '12345678', '3411234567', 'María', 'García', 'Av. Pellegrini 1234'),
('juan.perez@email.com', 'hash456', 'DNI', '23456789', '3411234568', 'Juan', 'Pérez', 'Córdoba 567'),
('ana.rodriguez@email.com', 'hash789', 'DNI', '34567890', '3411234569', 'Ana', 'Rodríguez', 'San Martín 890'),
('carlos.lopez@email.com', 'hash012', 'DNI', '45678901', '3411234570', 'Carlos', 'López', 'Mitre 345'),
('lucia.martinez@email.com', 'hash345', 'DNI', '56789012', '3411234571', 'Lucía', 'Martínez', 'Oroño 678'),
('pedro.gonzalez@email.com', 'hash678', 'DNI', '67890123', '3411234572', 'Pedro', 'González', 'Rioja 901'),
('sofia.fernandez@email.com', 'hash901', 'DNI', '78901234', '3411234573', 'Sofía', 'Fernández', 'Sarmiento 234'),
('diego.ruiz@email.com', 'hash234', 'DNI', '89012345', '3411234574', 'Diego', 'Ruiz', 'Entre Ríos 567'),
('valeria.torres@email.com', 'hash567', 'DNI', '90123456', '3411234575', 'Valeria', 'Torres', 'Paraguay 890'),
('miguel.silva@email.com', 'hash890', 'DNI', '01234567', '3411234576', 'Miguel', 'Silva', 'Urquiza 123'),
('camila.morales@email.com', 'hash123', 'DNI', '11234567', '3411234577', 'Camila', 'Morales', 'Zeballos 456'),
('fernando.castro@email.com', 'hash456', 'DNI', '21234567', '3411234578', 'Fernando', 'Castro', 'Laprida 789'),
('gabriela.herrera@email.com', 'hash789', 'DNI', '31234567', '3411234579', 'Gabriela', 'Herrera', 'Bv. Oroño 012'),
('ricardo.mendoza@email.com', 'hash012', 'DNI', '41234567', '3411234580', 'Ricardo', 'Mendoza', '1ro de Mayo 345'),
('natalia.vargas@email.com', 'hash345', 'DNI', '51234567', '3411234581', 'Natalia', 'Vargas', 'Catamarca 678'),
('sebastian.ortega@email.com', 'hash678', 'DNI', '61234567', '3411234582', 'Sebastián', 'Ortega', 'Mendoza 901'),
('andrea.jimenez@email.com', 'hash901', 'DNI', '71234567', '3411234583', 'Andrea', 'Jiménez', 'Santa Fe 234'),
('pablo.romero@email.com', 'hash234', 'DNI', '81234567', '3411234584', 'Pablo', 'Romero', 'Corrientes 567'),
('claudia.gutierrez@email.com', 'hash567', 'DNI', '91234567', '3411234585', 'Claudia', 'Gutiérrez', 'Tucumán 890'),
('alejandro.ramos@email.com', 'hash890', 'DNI', '02234567', '3411234586', 'Alejandro', 'Ramos', 'Jujuy 123');

-- 4. Usuarios Prestatarios (tienen servicios, horarios, zonas)
INSERT INTO usuario (mail, contrasena, tipo_doc, numero_doc, telefono, nombre, apellido, direccion, nombre_fantasia, descripcion, foto) VALUES
('limpieza.total@email.com', 'hash123', 'CUIT', '20123456789', '3411111111', 'Roberto', 'Limpio', 'Av. Francia 1111', 'Limpieza Total', 'Servicios de limpieza profunda para hogar y oficina', 'fotos/limpieza1.jpg'),
('plomero.experto@email.com', 'hash456', 'CUIT', '20234567890', '3411111112', 'José', 'Caño', 'Balcarce 2222', 'Plomería Experta', 'Especialistas en instalaciones y reparaciones', 'fotos/plomero1.jpg'),
('electricista.pro@email.com', 'hash789', 'CUIT', '20345678901', '3411111113', 'Carlos', 'Voltio', 'Moreno 3333', 'Electricidad Pro', 'Instalaciones eléctricas seguras y eficientes', 'fotos/electricista1.jpg'),
('jardin.verde@email.com', 'hash012', 'CUIT', '20456789012', '3411111114', 'María', 'Flores', 'Alem 4444', 'Jardín Verde', 'Diseño y mantenimiento de espacios verdes', 'fotos/jardin1.jpg'),
('carpintero.maestro@email.com', 'hash345', 'CUIT', '20567890123', '3411111115', 'Pedro', 'Madera', 'Dorrego 5555', 'Carpintería Maestro', 'Muebles a medida y reparaciones', 'fotos/carpintero1.jpg'),
('pintor.artista@email.com', 'hash678', 'CUIT', '20678901234', '3411111116', 'Luis', 'Pincel', 'Rodríguez 6666', 'Pintura Artista', 'Pinturas decorativas y tradicionales', 'fotos/pintor1.jpg'),
('mecanico.rapido@email.com', 'hash901', 'CUIT', '20789012345', '3411111117', 'Diego', 'Motor', 'Wheelwright 7777', 'Mecánica Rápida', 'Reparación integral de vehículos', 'fotos/mecanico1.jpg'),
('tech.solutions@email.com', 'hash234', 'CUIT', '20890123456', '3411111118', 'Ana', 'Byte', 'Güemes 8888', 'Tech Solutions', 'Soporte técnico y reparación de PC', 'fotos/tech1.jpg'),
('bella.estetica@email.com', 'hash567', 'CUIT', '20901234567', '3411111119', 'Sofía', 'Bella', 'Pasco 9999', 'Bella Estética', 'Tratamientos de belleza y relajación', 'fotos/bella1.jpg'),
('profe.particular@email.com', 'hash890', 'CUIT', '21012345678', '3411111120', 'Miguel', 'Saber', 'Alvear 1010', 'Profesor Particular', 'Clases de matemáticas y física', 'fotos/profe1.jpg'),
('pet.care@email.com', 'hash123', 'CUIT', '21123456789', '3411111121', 'Laura', 'Animal', 'Riobamba 1111', 'Pet Care', 'Cuidado integral de mascotas', 'fotos/pet1.jpg'),
('chef.gourmet@email.com', 'hash456', 'CUIT', '21234567890', '3411111122', 'Antonio', 'Sabor', 'Chacabuco 1212', 'Chef Gourmet', 'Catering y comida casera', 'fotos/chef1.jpg'),
('mudanzas.express@email.com', 'hash789', 'CUIT', '21345678901', '3411111123', 'Fernando', 'Carga', 'Necochea 1313', 'Mudanzas Express', 'Mudanzas y fletes rápidos', 'fotos/mudanza1.jpg'),
('salud.integral@email.com', 'hash012', 'CUIT', '21456789012', '3411111124', 'Claudia', 'Vida', 'Maipú 1414', 'Salud Integral', 'Masajes terapéuticos y relajantes', 'fotos/salud1.jpg'),
('eventos.magicos@email.com', 'hash345', 'CUIT', '21567890123', '3411111125', 'Patricia', 'Fiesta', 'Presidente Roca 1515', 'Eventos Mágicos', 'Organización de eventos únicos', 'fotos/eventos1.jpg'),
('limpieza.express@email.com', 'hash678', 'CUIT', '21678901234', '3411111126', 'Ricardo', 'Brillo', 'Av. Belgrano 1616', 'Limpieza Express', 'Limpieza rápida y eficiente', 'fotos/limpieza2.jpg'),
('plomeria.24hs@email.com', 'hash901', 'CUIT', '21789012345', '3411111127', 'Marcos', 'Agua', 'Cochabamba 1717', 'Plomería 24hs', 'Emergencias las 24 horas', 'fotos/plomero2.jpg'),
('electricidad.segura@email.com', 'hash234', 'CUIT', '21890123456', '3411111128', 'Gabriel', 'Luz', 'Salta 1818', 'Electricidad Segura', 'Instalaciones certificadas', 'fotos/electricista2.jpg'),
('jardineria.creativa@email.com', 'hash567', 'CUIT', '21901234567', '3411111129', 'Elena', 'Jardín', 'Jujuy 1919', 'Jardinería Creativa', 'Diseños únicos de jardines', 'fotos/jardin2.jpg'),
('muebles.finos@email.com', 'hash890', 'CUIT', '22012345678', '3411111130', 'Raúl', 'Fino', 'Catamarca 2020', 'Muebles Finos', 'Carpintería de alta calidad', 'fotos/carpintero2.jpg');

-- 5. Tareas por tipo de servicio
INSERT INTO tarea (nombre_tarea, descripcion_tarea, duracion_tarea, tipo_servicio_id) VALUES
-- Limpieza
('Limpieza general hogar', 'Limpieza completa de casa hasta 3 ambientes', 120, 1),
('Limpieza profunda', 'Limpieza profunda con desinfección', 180, 1),
('Limpieza oficina', 'Limpieza de oficina comercial', 90, 1),
('Limpieza post obra', 'Limpieza después de construcción', 240, 1),
-- Plomería
('Reparación canillas', 'Reparación o cambio de canillas', 60, 2),
('Destapado cloacas', 'Destapado de desagües y cloacas', 90, 2),
('Instalación termotanque', 'Instalación de termotanque nuevo', 120, 2),
('Reparación pérdidas', 'Reparación de pérdidas de agua', 45, 2),
-- Electricidad
('Instalación tomas', 'Instalación de tomas corrientes', 30, 3),
('Reparación cortocircuitos', 'Diagnóstico y reparación eléctrica', 60, 3),
('Instalación luces', 'Instalación de artefactos lumínicos', 45, 3),
('Cuadro eléctrico', 'Instalación o reparación de cuadros', 90, 3),
-- Jardinería
('Poda árboles', 'Poda y mantenimiento de árboles', 90, 4),
('Diseño jardín', 'Diseño y plantación de jardín', 180, 4),
('Mantenimiento césped', 'Corte y cuidado del césped', 60, 4),
('Limpieza jardín', 'Limpieza general de espacios verdes', 120, 4),
-- Carpintería
('Mueble a medida', 'Fabricación de mueble personalizado', 480, 5),
('Reparación muebles', 'Reparación de muebles existentes', 120, 5),
('Instalación puertas', 'Instalación de puertas nuevas', 180, 5),
('Deck exterior', 'Construcción de deck de madera', 360, 5),
-- Pintura
('Pintura interior', 'Pintura de ambientes interiores', 240, 6),
('Pintura exterior', 'Pintura de fachadas exteriores', 360, 6),
('Pintura decorativa', 'Técnicas decorativas especiales', 180, 6),
('Impermeabilización', 'Pintura impermeabilizante', 120, 6),
-- Mecánica
('Service completo', 'Mantenimiento integral del vehículo', 180, 7),
('Reparación motor', 'Diagnóstico y reparación de motor', 240, 7),
('Cambio aceite', 'Cambio de aceite y filtros', 45, 7),
('Reparación frenos', 'Reparación sistema de frenos', 120, 7),
-- Informática
('Reparación PC', 'Diagnóstico y reparación de computadoras', 120, 8),
('Instalación software', 'Instalación y configuración de programas', 60, 8),
('Limpieza virus', 'Eliminación de virus y malware', 90, 8),
('Backup datos', 'Respaldo y recuperación de datos', 60, 8),
-- Belleza
('Corte cabello', 'Corte y peinado profesional', 60, 9),
('Manicura completa', 'Manicura y esmaltado', 90, 9),
('Tratamiento facial', 'Limpieza facial profunda', 120, 9),
('Masaje relajante', 'Masaje corporal relajante', 90, 9),
-- Educación
('Clases matemáticas', 'Clases particulares de matemáticas', 60, 10),
('Apoyo escolar', 'Apoyo en tareas escolares', 90, 10),
('Preparación exámenes', 'Preparación para exámenes específicos', 120, 10),
('Clases idiomas', 'Clases de idiomas extranjeros', 60, 10),
-- Mascotas
('Paseo perros', 'Paseo diario de mascotas', 60, 11),
('Baño mascotas', 'Baño y cepillado de mascotas', 90, 11),
('Cuidado domicilio', 'Cuidado de mascotas en domicilio', 480, 11),
('Entrenamiento', 'Entrenamiento básico de obediencia', 120, 11),
-- Cocina
('Comida casera', 'Preparación de comida casera', 120, 12),
('Catering eventos', 'Servicio de catering para eventos', 360, 12),
('Clases cocina', 'Clases de cocina personalizada', 90, 12),
('Meal prep', 'Preparación de comidas semanales', 180, 12),
-- Transporte
('Mudanza completa', 'Mudanza de casa completa', 480, 13),
('Flete mediano', 'Transporte de muebles y objetos', 120, 13),
('Mudanza oficina', 'Mudanza de oficina comercial', 360, 13),
('Transporte materiales', 'Transporte de materiales de obra', 90, 13),
-- Salud
('Masaje terapéutico', 'Masaje para dolores musculares', 90, 14),
('Reflexología', 'Tratamiento de reflexología podal', 60, 14),
('Quiromasaje', 'Masaje quiropráctico', 120, 14),
('Relajación', 'Sesión de relajación y meditación', 60, 14),
-- Eventos
('Fiesta infantil', 'Organización de cumpleaños infantil', 240, 15),
('Evento corporativo', 'Organización de eventos empresariales', 360, 15),
('Casamiento', 'Organización integral de bodas', 720, 15),
('Fiesta 15 años', 'Organización de fiesta de 15 años', 480, 15);

-- 6. Servicios (uno por tarea)
INSERT INTO servicio (precio, tarea_id) VALUES
(8500.00, 1), (12000.00, 2), (6500.00, 3), (18000.00, 4), -- Limpieza
(3500.00, 5), (4500.00, 6), (8000.00, 7), (2500.00, 8), -- Plomería
(2000.00, 9), (3500.00, 10), (2500.00, 11), (5500.00, 12), -- Electricidad
(4500.00, 13), (12000.00, 14), (3000.00, 15), (6000.00, 16), -- Jardinería
(25000.00, 17), (6000.00, 18), (12000.00, 19), (20000.00, 20), -- Carpintería
(15000.00, 21), (25000.00, 22), (12000.00, 23), (8000.00, 24), -- Pintura
(12000.00, 25), (18000.00, 26), (3000.00, 27), (8000.00, 28), -- Mecánica
(6000.00, 29), (3500.00, 30), (4500.00, 31), (4000.00, 32), -- Informática
(4000.00, 33), (3500.00, 34), (8000.00, 35), (5500.00, 36), -- Belleza
(3500.00, 37), (4000.00, 38), (5000.00, 39), (4500.00, 40), -- Educación
(2500.00, 41), (3500.00, 42), (8000.00, 43), (6000.00, 44), -- Mascotas
(8000.00, 45), (15000.00, 46), (4500.00, 47), (10000.00, 48), -- Cocina
(25000.00, 49), (8000.00, 50), (20000.00, 51), (5000.00, 52), -- Transporte
(5500.00, 53), (4000.00, 54), (7000.00, 55), (3500.00, 56), -- Salud
(18000.00, 57), (25000.00, 58), (45000.00, 59), (35000.00, 60); -- Eventos

-- 7. Relaciones Usuario-Servicio (prestatarios ofrecen servicios)
INSERT INTO usuario_servicio (usuario_id, servicio_id) VALUES
-- Limpieza Total (usuario 21)
(21, 1), (21, 2), (21, 3), (21, 4),
-- Plomería Experta (usuario 22)
(22, 5), (22, 6), (22, 7), (22, 8),
-- Electricidad Pro (usuario 23)
(23, 9), (23, 10), (23, 11), (23, 12),
-- Jardín Verde (usuario 24)
(24, 13), (24, 14), (24, 15), (24, 16),
-- Carpintería Maestro (usuario 25)
(25, 17), (25, 18), (25, 19), (25, 20),
-- Pintura Artista (usuario 26)
(26, 21), (26, 22), (26, 23), (26, 24),
-- Mecánica Rápida (usuario 27)
(27, 25), (27, 26), (27, 27), (27, 28),
-- Tech Solutions (usuario 28)
(28, 29), (28, 30), (28, 31), (28, 32),
-- Bella Estética (usuario 29)
(29, 33), (29, 34), (29, 35), (29, 36),
-- Profesor Particular (usuario 30)
(30, 37), (30, 38), (30, 39), (30, 40),
-- Pet Care (usuario 31)
(31, 41), (31, 42), (31, 43), (31, 44),
-- Chef Gourmet (usuario 32)
(32, 45), (32, 46), (32, 47), (32, 48),
-- Mudanzas Express (usuario 33)
(33, 49), (33, 50), (33, 51), (33, 52),
-- Salud Integral (usuario 34)
(34, 53), (34, 54), (34, 55), (34, 56),
-- Eventos Mágicos (usuario 35)
(35, 57), (35, 58), (35, 59), (35, 60),
-- Algunos prestatarios adicionales con servicios múltiples
(36, 1), (36, 2), (36, 3), -- Limpieza Express
(37, 5), (37, 6), (37, 7), -- Plomería 24hs
(38, 9), (38, 10), (38, 11), -- Electricidad Segura
(39, 13), (39, 14), (39, 15), -- Jardinería Creativa
(40, 17), (40, 18), (40, 19); -- Muebles Finos

-- 8. Relaciones Usuario-TipoServicio (prestatarios con tipos de servicio)
INSERT INTO usuario_tipo_servicio (usuario_id, tipo_servicio_id) VALUES
(21, 1), (22, 2), (23, 3), (24, 4), (25, 5), (26, 6), (27, 7), (28, 8), (29, 9), (30, 10),
(31, 11), (32, 12), (33, 13), (34, 14), (35, 15), (36, 1), (37, 2), (38, 3), (39, 4), (40, 5);

-- 9. Relaciones Usuario-Zona (prestatarios trabajan en zonas)
INSERT INTO usuario_zona (usuario_id, zona_id) VALUES
-- Prestatarios con cobertura amplia
(21, 1), (21, 2), (21, 3), (21, 6), (21, 7), -- Limpieza Total
(22, 1), (22, 2), (22, 4), (22, 8), (22, 9), -- Plomería Experta
(23, 1), (23, 3), (23, 5), (23, 10), (23, 11), -- Electricidad Pro
(24, 2), (24, 4), (24, 6), (24, 11), (24, 12), -- Jardín Verde
(25, 1), (25, 2), (25, 3), (25, 4), (25, 5), -- Carpintería Maestro
(26, 1), (26, 3), (26, 5), (26, 7), (26, 9), -- Pintura Artista
(27, 1), (27, 2), (27, 4), (27, 6), (27, 8), -- Mecánica Rápida
(28, 1), (28, 2), (28, 3), (28, 4), (28, 5), -- Tech Solutions
(29, 1), (29, 2), (29, 6), (29, 7), (29, 8), -- Bella Estética
(30, 1), (30, 2), (30, 3), (30, 6), (30, 7), -- Profesor Particular
(31, 2), (31, 4), (31, 6), (31, 8), (31, 10), -- Pet Care
(32, 1), (32, 2), (32, 3), (32, 4), (32, 5), -- Chef Gourmet
(33, 1), (33, 2), (33, 3), (33, 4), (33, 5), -- Mudanzas Express
(34, 1), (34, 2), (34, 6), (34, 7), (34, 8), -- Salud Integral
(35, 1), (35, 2), (35, 3), (35, 4), (35, 5), -- Eventos Mágicos
(36, 1), (36, 2), (36, 3), (36, 6), -- Limpieza Express
(37, 1), (37, 2), (37, 4), (37, 8), -- Plomería 24hs
(38, 1), (38, 3), (38, 5), (38, 10), -- Electricidad Segura
(39, 2), (39, 4), (39, 6), (39, 11), -- Jardinería Creativa
(40, 1), (40, 2), (40, 3), (40, 4); -- Muebles Finos

-- 10. Horarios de trabajo (prestatarios)
INSERT INTO horario (dia_semana, hora_desde, hora_hasta, usuario_id) VALUES
-- Limpieza Total (usuario 21) - Lunes a Viernes
(1, '08:00:00', '18:00:00', 21),
(2, '08:00:00', '18:00:00', 21),
(3, '08:00:00', '18:00:00', 21),
(4, '08:00:00', '18:00:00', 21),
(5, '08:00:00', '16:00:00', 21),
(6, '09:00:00', '13:00:00', 21),

-- Plomería Experta (usuario 22) - Lunes a Sábado
(1, '07:00:00', '19:00:00', 22),
(2, '07:00:00', '19:00:00', 22),
(3, '07:00:00', '19:00:00', 22),
(4, '07:00:00', '19:00:00', 22),
(5, '07:00:00', '19:00:00', 22),
(6, '08:00:00', '15:00:00', 22),

-- Electricidad Pro (usuario 23) - Lunes a Viernes
(1, '08:00:00', '17:00:00', 23),
(2, '08:00:00', '17:00:00', 23),
(3, '08:00:00', '17:00:00', 23),
(4, '08:00:00', '17:00:00', 23),
(5, '08:00:00', '15:00:00', 23),

-- Jardín Verde (usuario 24) - Martes a Sábado
(2, '07:00:00', '16:00:00', 24),
(3, '07:00:00', '16:00:00', 24),
(4, '07:00:00', '16:00:00', 24),
(5, '07:00:00', '16:00:00', 24),
(6, '07:00:00', '14:00:00', 24),

-- Carpintería Maestro (usuario 25) - Lunes a Viernes
(1, '08:00:00', '18:00:00', 25),
(2, '08:00:00', '18:00:00', 25),
(3, '08:00:00', '18:00:00', 25),
(4, '08:00:00', '18:00:00', 25),
(5, '08:00:00', '16:00:00', 25),

-- Pintura Artista (usuario 26) - Lunes a Sábado
(1, '08:00:00', '17:00:00', 26),
(2, '08:00:00', '17:00:00', 26),
(3, '08:00:00', '17:00:00', 26),
(4, '08:00:00', '17:00:00', 26),
(5, '08:00:00', '17:00:00', 26),
(6, '09:00:00', '13:00:00', 26),

-- Mecánica Rápida (usuario 27) - Lunes a Sábado
(1, '08:00:00', '18:00:00', 27),
(2, '08:00:00', '18:00:00', 27),
(3, '08:00:00', '18:00:00', 27),
(4, '08:00:00', '18:00:00', 27),
(5, '08:00:00', '18:00:00', 27),
(6, '08:00:00', '15:00:00', 27),

-- Tech Solutions (usuario 28) - Lunes a Viernes
(1, '09:00:00', '19:00:00', 28),
(2, '09:00:00', '19:00:00', 28),
(3, '09:00:00', '19:00:00', 28),
(4, '09:00:00', '19:00:00', 28),
(5, '09:00:00', '17:00:00', 28),

-- Bella Estética (usuario 29) - Martes a Sábado
(2, '09:00:00', '19:00:00', 29),
(3, '09:00:00', '19:00:00', 29),
(4, '09:00:00', '19:00:00', 29),
(5, '09:00:00', '19:00:00', 29),
(6, '09:00:00', '18:00:00', 29),

-- Profesor Particular (usuario 30) - Lunes a Viernes
(1, '14:00:00', '20:00:00', 30),
(2, '14:00:00', '20:00:00', 30),
(3, '14:00:00', '20:00:00', 30),
(4, '14:00:00', '20:00:00', 30),
(5, '14:00:00', '20:00:00', 30),
(6, '09:00:00', '13:00:00', 30),

-- Pet Care (usuario 31) - Todos los días
(1, '07:00:00', '20:00:00', 31),
(2, '07:00:00', '20:00:00', 31),
(3, '07:00:00', '20:00:00', 31),
(4, '07:00:00', '20:00:00', 31),
(5, '07:00:00', '20:00:00', 31),
(6, '08:00:00', '18:00:00', 31),
(0, '09:00:00', '17:00:00', 31),

-- Chef Gourmet (usuario 32) - Lunes a Sábado
(1, '10:00:00', '22:00:00', 32),
(2, '10:00:00', '22:00:00', 32),
(3, '10:00:00', '22:00:00', 32),
(4, '10:00:00', '22:00:00', 32),
(5, '10:00:00', '22:00:00', 32),
(6, '11:00:00', '20:00:00', 32),

-- Mudanzas Express (usuario 33) - Lunes a Sábado
(1, '07:00:00', '19:00:00', 33),
(2, '07:00:00', '19:00:00', 33),
(3, '07:00:00', '19:00:00', 33),
(4, '07:00:00', '19:00:00', 33),
(5, '07:00:00', '19:00:00', 33),
(6, '08:00:00', '16:00:00', 33),

-- Salud Integral (usuario 34) - Lunes a Viernes
(1, '09:00:00', '19:00:00', 34),
(2, '09:00:00', '19:00:00', 34),
(3, '09:00:00', '19:00:00', 34),
(4, '09:00:00', '19:00:00', 34),
(5, '09:00:00', '17:00:00', 34),

-- Eventos Mágicos (usuario 35) - Martes a Domingo
(2, '09:00:00', '21:00:00', 35),
(3, '09:00:00', '21:00:00', 35),
(4, '09:00:00', '21:00:00', 35),
(5, '09:00:00', '21:00:00', 35),
(6, '09:00:00', '23:00:00', 35),
(0, '10:00:00', '22:00:00', 35),

-- Horarios para prestatarios adicionales
(1, '08:00:00', '17:00:00', 36), (2, '08:00:00', '17:00:00', 36), (3, '08:00:00', '17:00:00', 36), -- Limpieza Express
(1, '07:00:00', '19:00:00', 37), (2, '07:00:00', '19:00:00', 37), (3, '07:00:00', '19:00:00', 37), -- Plomería 24hs
(1, '08:00:00', '17:00:00', 38), (2, '08:00:00', '17:00:00', 38), (3, '08:00:00', '17:00:00', 38), -- Electricidad Segura
(2, '07:00:00', '16:00:00', 39), (3, '07:00:00', '16:00:00', 39), (4, '07:00:00', '16:00:00', 39), -- Jardinería Creativa
(1, '08:00:00', '18:00:00', 40), (2, '08:00:00', '18:00:00', 40), (3, '08:00:00', '18:00:00', 40); -- Muebles Finos

-- 11. Turnos (clientes solicitando servicios)
INSERT INTO turno (fecha_turno, hora_turno, estado_turno, usuario_id, servicio_id) VALUES
-- Turnos para Julio 2025
('2025-07-16', '09:00:00', 'confirmado', 1, 1), -- María García - Limpieza general
('2025-07-16', '14:00:00', 'confirmado', 2, 5), -- Juan Pérez - Reparación canillas
('2025-07-16', '10:00:00', 'pendiente', 3, 9), -- Ana Rodríguez - Instalación tomas
('2025-07-17', '08:00:00', 'confirmado', 4, 13), -- Carlos López - Poda árboles
('2025-07-17', '15:00:00', 'completado', 5, 17), -- Lucía Martínez - Mueble a medida
('2025-07-17', '11:00:00', 'confirmado', 6, 21), -- Pedro González - Pintura interior
('2025-07-18', '09:00:00', 'confirmado', 7, 25), -- Sofía Fernández - Service completo
('2025-07-18', '16:00:00', 'pendiente', 8, 29), -- Diego Ruiz - Reparación PC
('2025-07-18', '14:00:00', 'confirmado', 9, 33), -- Valeria Torres - Corte cabello
('2025-07-19', '10:00:00', 'confirmado', 10, 37), -- Miguel Silva - Clases matemáticas
('2025-07-19', '17:00:00', 'confirmado', 11, 41), -- Camila Morales - Paseo perros
('2025-07-19', '12:00:00', 'completado', 12, 45), -- Fernando Castro - Comida casera
('2025-07-20', '08:00:00', 'confirmado', 13, 49), -- Gabriela Herrera - Mudanza completa
('2025-07-20', '15:00:00', 'confirmado', 14, 53), -- Ricardo Mendoza - Masaje terapéutico
('2025-07-20', '11:00:00', 'pendiente', 15, 57), -- Natalia Vargas - Fiesta infantil
('2025-07-21', '09:00:00', 'confirmado', 16, 2), -- Sebastián Ortega - Limpieza profunda
('2025-07-21', '14:00:00', 'confirmado', 17, 6), -- Andrea Jiménez - Destapado cloacas
('2025-07-21', '10:00:00', 'confirmado', 18, 10), -- Pablo Romero - Reparación cortocircuitos
('2025-07-22', '08:00:00', 'confirmado', 19, 14), -- Claudia Gutiérrez - Diseño jardín
('2025-07-22', '16:00:00', 'pendiente', 20, 18), -- Alejandro Ramos - Reparación muebles
('2025-07-22', '13:00:00', 'confirmado', 1, 22), -- María García - Pintura exterior
('2025-07-23', '09:00:00', 'confirmado', 2, 26), -- Juan Pérez - Reparación motor
('2025-07-23', '15:00:00', 'confirmado', 3, 30), -- Ana Rodríguez - Instalación software
('2025-07-23', '11:00:00', 'completado', 4, 34), -- Carlos López - Manicura completa
('2025-07-24', '10:00:00', 'confirmado', 5, 38), -- Lucía Martínez - Apoyo escolar
('2025-07-24', '17:00:00', 'confirmado', 6, 42), -- Pedro González - Baño mascotas
('2025-07-24', '12:00:00', 'confirmado', 7, 46), -- Sofía Fernández - Catering eventos
('2025-07-25', '08:00:00', 'confirmado', 8, 50), -- Diego Ruiz - Flete mediano
('2025-07-25', '14:00:00', 'pendiente', 9, 54), -- Valeria Torres - Reflexología
('2025-07-25', '16:00:00', 'confirmado', 10, 58), -- Miguel Silva - Evento corporativo
('2025-07-26', '09:00:00', 'confirmado', 11, 3), -- Camila Morales - Limpieza oficina
('2025-07-26', '11:00:00', 'confirmado', 12, 7), -- Fernando Castro - Instalación termotanque
('2025-07-26', '15:00:00', 'completado', 13, 11), -- Gabriela Herrera - Instalación luces
('2025-07-27', '08:00:00', 'confirmado', 14, 15), -- Ricardo Mendoza - Mantenimiento césped
('2025-07-27', '14:00:00', 'confirmado', 15, 19), -- Natalia Vargas - Instalación puertas
('2025-07-27', '10:00:00', 'confirmado', 16, 23), -- Sebastián Ortega - Pintura decorativa
('2025-07-28', '09:00:00', 'pendiente', 17, 27), -- Andrea Jiménez - Cambio aceite
('2025-07-28', '16:00:00', 'confirmado', 18, 31), -- Pablo Romero - Limpieza virus
('2025-07-28', '13:00:00', 'confirmado', 19, 35), -- Claudia Gutiérrez - Tratamiento facial
('2025-07-29', '10:00:00', 'confirmado', 20, 39), -- Alejandro Ramos - Preparación exámenes
('2025-07-29', '17:00:00', 'confirmado', 1, 43), -- María García - Cuidado domicilio
('2025-07-29', '12:00:00', 'completado', 2, 47), -- Juan Pérez - Clases cocina
('2025-07-30', '08:00:00', 'confirmado', 3, 51), -- Ana Rodríguez - Mudanza oficina
('2025-07-30', '14:00:00', 'confirmado', 4, 55), -- Carlos López - Quiromasaje
('2025-07-30', '16:00:00', 'pendiente', 5, 59), -- Lucía Martínez - Casamiento
('2025-07-31', '09:00:00', 'confirmado', 6, 4), -- Pedro González - Limpieza post obra
('2025-07-31', '11:00:00', 'confirmado', 7, 8), -- Sofía Fernández - Reparación pérdidas
('2025-07-31', '15:00:00', 'confirmado', 8, 12), -- Diego Ruiz - Cuadro eléctrico

-- Turnos para Agosto 2025
('2025-08-01', '09:00:00', 'confirmado', 9, 16), -- Valeria Torres - Limpieza jardín
('2025-08-01', '14:00:00', 'confirmado', 10, 20), -- Miguel Silva - Deck exterior
('2025-08-01', '11:00:00', 'pendiente', 11, 24), -- Camila Morales - Impermeabilización
('2025-08-02', '08:00:00', 'confirmado', 12, 28), -- Fernando Castro - Reparación frenos
('2025-08-02', '16:00:00', 'confirmado', 13, 32), -- Gabriela Herrera - Backup datos
('2025-08-02', '13:00:00', 'confirmado', 14, 36), -- Ricardo Mendoza - Masaje relajante
('2025-08-03', '10:00:00', 'confirmado', 15, 40), -- Natalia Vargas - Clases idiomas
('2025-08-03', '17:00:00', 'completado', 16, 44), -- Sebastián Ortega - Entrenamiento
('2025-08-03', '12:00:00', 'confirmado', 17, 48), -- Andrea Jiménez - Meal prep
('2025-08-04', '09:00:00', 'confirmado', 18, 52), -- Pablo Romero - Transporte materiales
('2025-08-04', '15:00:00', 'pendiente', 19, 56), -- Claudia Gutiérrez - Relajación
('2025-08-04', '11:00:00', 'confirmado', 20, 60), -- Alejandro Ramos - Fiesta 15 años
('2025-08-05', '09:00:00', 'confirmado', 1, 1), -- María García - Limpieza general (repetición)
('2025-08-05', '14:00:00', 'confirmado', 2, 5), -- Juan Pérez - Reparación canillas (repetición)
('2025-08-05', '16:00:00', 'confirmado', 3, 9), -- Ana Rodríguez - Instalación tomas (repetición)
('2025-08-06', '08:00:00', 'confirmado', 4, 13), -- Carlos López - Poda árboles (repetición)
('2025-08-06', '15:00:00', 'confirmado', 5, 17), -- Lucía Martínez - Mueble a medida (repetición)
('2025-08-06', '12:00:00', 'completado', 6, 21), -- Pedro González - Pintura interior (repetición)
('2025-08-07', '09:00:00', 'confirmado', 7, 25), -- Sofía Fernández - Service completo (repetición)
('2025-08-07', '16:00:00', 'confirmado', 8, 29), -- Diego Ruiz - Reparación PC (repetición)
('2025-08-07', '14:00:00', 'pendiente', 9, 33), -- Valeria Torres - Corte cabello (repetición)
('2025-08-08', '10:00:00', 'confirmado', 10, 37), -- Miguel Silva - Clases matemáticas (repetición)
('2025-08-08', '17:00:00', 'confirmado', 11, 41), -- Camila Morales - Paseo perros (repetición)
('2025-08-08', '13:00:00', 'confirmado', 12, 45); -- Fernando Castro - Comida casera (repetición)

-- Consultas útiles para verificar la base de datos
SELECT 'RESUMEN DE LA BASE DE DATOS' as INFO;

SELECT 
    'Usuarios totales' as TIPO,
    COUNT(*) as CANTIDAD
FROM usuario
UNION ALL
SELECT 
    'Usuarios clientes (sin servicios)' as TIPO,
    COUNT(*) as CANTIDAD
FROM usuario u
LEFT JOIN usuario_servicio us ON u.id = us.usuario_id
WHERE us.usuario_id IS NULL
UNION ALL
SELECT 
    'Usuarios prestatarios (con servicios)' as TIPO,
    COUNT(DISTINCT us.usuario_id) as CANTIDAD
FROM usuario_servicio us
UNION ALL
SELECT 
    'Tipos de servicio' as TIPO,
    COUNT(*) as CANTIDAD
FROM tipo_servicio
UNION ALL
SELECT 
    'Tareas disponibles' as TIPO,
    COUNT(*) as CANTIDAD
FROM tarea
UNION ALL
SELECT 
    'Servicios activos' as TIPO,
    COUNT(*) as CANTIDAD
FROM servicio
UNION ALL
SELECT 
    'Turnos totales' as TIPO,
    COUNT(*) as CANTIDAD
FROM turno
UNION ALL
SELECT 
    'Turnos confirmados' as TIPO,
    COUNT(*) as CANTIDAD
FROM turno 
WHERE estado_turno = 'confirmado'
UNION ALL
SELECT 
    'Zonas disponibles' as TIPO,
    COUNT(*) as CANTIDAD
FROM zona
UNION ALL
SELECT 
    'Horarios configurados' as TIPO,
    COUNT(*) as CANTIDAD
FROM horario;

-- Consulta para ver prestatarios con sus servicios
SELECT 
    u.nombre_fantasia as PRESTATARIO,
    u.nombre,
    u.apellido,
    GROUP_CONCAT(DISTINCT ts.nombre_tipo ORDER BY ts.nombre_tipo SEPARATOR ', ') as TIPOS_SERVICIO,
    COUNT(DISTINCT s.id) as CANTIDAD_SERVICIOS,
    COUNT(DISTINCT t.id) as TURNOS_RESERVADOS
FROM usuario u
INNER JOIN usuario_servicio us ON u.id = us.usuario_id
INNER JOIN servicio s ON us.servicio_id = s.id
INNER JOIN tarea ta ON s.tarea_id = ta.id
INNER JOIN tipo_servicio ts ON ta.tipo_servicio_id = ts.id
LEFT JOIN turno t ON s.id = t.servicio_id
GROUP BY u.id, u.nombre_fantasia, u.nombre, u.apellido
ORDER BY u.nombre_fantasia;

-- Consulta para ver turnos por fecha
SELECT 
    t.fecha_turno as FECHA,
    t.hora_turno as HORA,
    CONCAT(uc.nombre, ' ', uc.apellido) as CLIENTE,
    up.nombre_fantasia as PRESTATARIO,
    ta.nombre_tarea as SERVICIO,
    s.precio as PRECIO,
    t.estado_turno as ESTADO
FROM turno t
INNER JOIN usuario uc ON t.usuario_id = uc.id
INNER JOIN servicio s ON t.servicio_id = s.id
INNER JOIN tarea ta ON s.tarea_id = ta.id
INNER JOIN usuario_servicio us ON s.id = us.servicio_id
INNER JOIN usuario up ON us.usuario_id = up.id
WHERE t.fecha_turno >= '2025-07-15'
ORDER BY t.fecha_turno, t.hora_turno;

-- Consulta para ver la cobertura de zonas por prestatario
SELECT 
    u.nombre_fantasia as PRESTATARIO,
    GROUP_CONCAT(DISTINCT z.descripcion_zona ORDER BY z.descripcion_zona SEPARATOR ' | ') as ZONAS_COBERTURA
FROM usuario u
INNER JOIN usuario_zona uz ON u.id = uz.usuario_id
INNER JOIN zona z ON uz.zona_id = z.id
WHERE u.nombre_fantasia IS NOT NULL
GROUP BY u.id, u.nombre_fantasia
ORDER BY u.nombre_fantasia;

-- Consulta para ver horarios de trabajo por prestatario
SELECT 
    u.nombre_fantasia as PRESTATARIO,
    CASE h.dia_semana
        WHEN 0 THEN 'Domingo'
        WHEN 1 THEN 'Lunes'
        WHEN 2 THEN 'Martes'
        WHEN 3 THEN 'Miércoles'
        WHEN 4 THEN 'Jueves'
        WHEN 5 THEN 'Viernes'
        WHEN 6 THEN 'Sábado'
    END as DIA,
    h.hora_desde as DESDE,
    h.hora_hasta as HASTA
FROM usuario u
INNER JOIN horario h ON u.id = h.usuario_id
WHERE u.nombre_fantasia IS NOT NULL
ORDER BY u.nombre_fantasia, h.dia_semana;

-- Estadísticas de facturación por prestatario
SELECT 
    u.nombre_fantasia as PRESTATARIO,
    COUNT(t.id) as TURNOS_COMPLETADOS,
    SUM(s.precio) as FACTURACION_TOTAL,
    AVG(s.precio) as PRECIO_PROMEDIO
FROM usuario u
INNER JOIN usuario_servicio us ON u.id = us.usuario_id
INNER JOIN servicio s ON us.servicio_id = s.id
INNER JOIN turno t ON s.id = t.servicio_id
WHERE t.estado_turno = 'completado'
GROUP BY u.id, u.nombre_fantasia
ORDER BY FACTURACION_TOTAL DESC;

-- Servicios más demandados
SELECT 
    ta.nombre_tarea as SERVICIO,
    ts.nombre_tipo as CATEGORIA,
    COUNT(t.id) as TURNOS_SOLICITADOS,
    s.precio as PRECIO,
    ta.duracion_tarea as DURACION_MINUTOS
FROM tarea ta
INNER JOIN tipo_servicio ts ON ta.tipo_servicio_id = ts.id
INNER JOIN servicio s ON ta.id = s.tarea_id
LEFT JOIN turno t ON s.id = t.servicio_id
GROUP BY ta.id, ta.nombre_tarea, ts.nombre_tipo, s.precio, ta.duracion_tarea
ORDER BY TURNOS_SOLICITADOS DESC;

COMMIT;